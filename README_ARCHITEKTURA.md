# MCP Agent Chat UI - Architektonick√Ω n√°vrh

> **Kompletn√≠ n√°vrh React aplikace pro chatovac√≠ rozhran√≠ s MCP Agentem**

---

## üìã Obsah

1. [P≈ôehled projektu](#p≈ôehled-projektu)
2. [Rychl√Ω start](#rychl√Ω-start)
3. [Dokumentace](#dokumentace)
4. [Technologie](#technologie)
5. [Architektura](#architektura)
6. [Implementace](#implementace)

---

## üéØ P≈ôehled projektu

MCP Agent Chat UI je modern√≠ React aplikace poskytuj√≠c√≠ intuitivn√≠ rozhran√≠ pro komunikaci s MCP Agentem p≈ôes WebSocket. Aplikace podporuje:

- ‚úÖ **Autentizace** - P≈ôihl√°≈°en√≠ p≈ôes username/password nebo p≈ô√≠m√Ω API kl√≠ƒç
- ‚úÖ **Real-time komunikace** - WebSocket s auto-reconnect
- ‚úÖ **Session management** - Spr√°va v√≠ce konverzac√≠
- ‚úÖ **Persistence** - Ukl√°d√°n√≠ zpr√°v a sessions v localStorage
- ‚úÖ **TypeScript** - Pln√° type safety
- ‚úÖ **Modern UI** - Tailwind CSS pro responsivn√≠ design

---

## üöÄ Rychl√Ω start

### 1. Instalace z√°vislost√≠

```bash
# State management a utilities
npm install zustand uuid
npm install -D @types/uuid

# Styling
npm install -D tailwindcss postcss autoprefixer
npx tailwindcss init -p

# Optional: Better form styles
npm install -D @tailwindcss/forms
npm install clsx
```

### 2. Konfigurace

```bash
# Vytvo≈ôit environment variables
cp .env.example .env.development
```

### 3. P≈ôeƒç√≠st dokumentaci

1. [`ARCHITEKTURA.md`](./ARCHITEKTURA.md) - Kompletn√≠ architektonick√Ω n√°vrh
2. [`ZAVISLOSTI.md`](./ZAVISLOSTI.md) - Detailn√≠ seznam z√°vislost√≠ a konfigurace
3. [`IMPLEMENTACNI_PLAN.md`](./IMPLEMENTACNI_PLAN.md) - Krok-za-krokem implementaƒçn√≠ pl√°n
4. [`REFERENCE.md`](./REFERENCE.md) - P≈ô√≠klady k√≥du a reference

### 4. Zaƒç√≠t implementaci

```bash
# Spustit v Code m√≥du pro implementaci
# N√°sledovat IMPLEMENTACNI_PLAN.md
```

---

## üìö Dokumentace

### Hlavn√≠ dokumenty

| Dokument | Popis | Pou≈æit√≠ |
|----------|-------|---------|
| [`ARCHITEKTURA.md`](./ARCHITEKTURA.md) | Kompletn√≠ architektonick√Ω n√°vrh, datov√© modely, komponenty | **Zaƒç√≠t zde** - Celkov√Ω p≈ôehled |
| [`ZAVISLOSTI.md`](./ZAVISLOSTI.md) | Seznam z√°vislost√≠, instalaƒçn√≠ p≈ô√≠kazy, konfigurace | Setup projektu |
| [`IMPLEMENTACNI_PLAN.md`](./IMPLEMENTACNI_PLAN.md) | Detailn√≠ pl√°n implementace po f√°z√≠ch | Krok-za-krokem guide |
| [`REFERENCE.md`](./REFERENCE.md) | P≈ô√≠klady k√≥du, uk√°zky implementace | Reference p≈ôi k√≥dov√°n√≠ |

---

## üõ† Technologie

### Core Stack
- **React 19** - UI framework
- **TypeScript** - Type safety
- **Vite** - Build tool
- **Zustand** - State management
- **Tailwind CSS** - Styling

### Key Features
- **WebSocket** - Real-time komunikace
- **LocalStorage** - Data persistence
- **Auto-reconnect** - Robustn√≠ s√≠≈•ov√° komunikace
- **Error Boundaries** - Graceful error handling

---

## üèó Architektura

### Struktura projektu

```
src/
‚îú‚îÄ‚îÄ components/          # React komponenty
‚îÇ   ‚îú‚îÄ‚îÄ auth/           # Autentizace (LoginForm, ApiKeyInput)
‚îÇ   ‚îú‚îÄ‚îÄ chat/           # Chat UI (MessageList, ChatInput)
‚îÇ   ‚îú‚îÄ‚îÄ session/        # Sessions (SessionList, SessionItem)
‚îÇ   ‚îú‚îÄ‚îÄ common/         # Sd√≠len√© (LoadingSpinner, Toast)
‚îÇ   ‚îî‚îÄ‚îÄ layout/         # Layout (AppLayout, Sidebar)
‚îÇ
‚îú‚îÄ‚îÄ services/           # Business logika
‚îÇ   ‚îú‚îÄ‚îÄ websocket.service.ts
‚îÇ   ‚îú‚îÄ‚îÄ auth.service.ts
‚îÇ   ‚îî‚îÄ‚îÄ storage.service.ts
‚îÇ
‚îú‚îÄ‚îÄ stores/             # Zustand stores
‚îÇ   ‚îú‚îÄ‚îÄ authStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ chatStore.ts
‚îÇ   ‚îú‚îÄ‚îÄ sessionStore.ts
‚îÇ   ‚îî‚îÄ‚îÄ websocketStore.ts
‚îÇ
‚îú‚îÄ‚îÄ hooks/              # Custom hooks
‚îÇ   ‚îú‚îÄ‚îÄ useWebSocket.ts
‚îÇ   ‚îú‚îÄ‚îÄ useAuth.ts
‚îÇ   ‚îú‚îÄ‚îÄ useChat.ts
‚îÇ   ‚îî‚îÄ‚îÄ useSession.ts
‚îÇ
‚îú‚îÄ‚îÄ types/              # TypeScript types
‚îÇ   ‚îú‚îÄ‚îÄ auth.types.ts
‚îÇ   ‚îú‚îÄ‚îÄ chat.types.ts
‚îÇ   ‚îú‚îÄ‚îÄ session.types.ts
‚îÇ   ‚îî‚îÄ‚îÄ websocket.types.ts
‚îÇ
‚îî‚îÄ‚îÄ utils/              # Utilities
    ‚îú‚îÄ‚îÄ constants.ts
    ‚îú‚îÄ‚îÄ validators.ts
    ‚îî‚îÄ‚îÄ formatters.ts
```

### Datov√Ω tok

```mermaid
graph TB
    subgraph UI
        A[Components]
        B[Custom Hooks]
    end
    
    subgraph State
        C[Zustand Stores]
    end
    
    subgraph Services
        D[WebSocketService]
        E[AuthService]
        F[StorageService]
    end
    
    subgraph External
        G[Backend API]
        H[LocalStorage]
    end
    
    A --> B
    B --> C
    C --> D
    C --> E
    C --> F
    D --> G
    E --> G
    F --> H
```

### Kl√≠ƒçov√© komponenty

#### 1. Autentizace
- [`LoginForm.tsx`](src/components/auth/LoginForm.tsx) - P≈ôihla≈°ovac√≠ formul√°≈ô
- [`ApiKeyInput.tsx`](src/components/auth/ApiKeyInput.tsx) - Direct API key input
- [`ProtectedRoute.tsx`](src/components/auth/ProtectedRoute.tsx) - Route guard

#### 2. Chat
- [`ChatContainer.tsx`](src/components/chat/ChatContainer.tsx) - Hlavn√≠ chat kontejner
- [`MessageList.tsx`](src/components/chat/MessageList.tsx) - Seznam zpr√°v
- [`Message.tsx`](src/components/chat/Message.tsx) - Jednotliv√° zpr√°va
- [`ChatInput.tsx`](src/components/chat/ChatInput.tsx) - Input pole
- [`TypingIndicator.tsx`](src/components/chat/TypingIndicator.tsx) - "Agent p√≠≈°e..."

#### 3. Sessions
- [`SessionList.tsx`](src/components/session/SessionList.tsx) - Seznam sessions
- [`SessionItem.tsx`](src/components/session/SessionItem.tsx) - Session polo≈æka
- [`NewSessionButton.tsx`](src/components/session/NewSessionButton.tsx) - Nov√° session

#### 4. Layout
- [`AppLayout.tsx`](src/components/layout/AppLayout.tsx) - Hlavn√≠ layout
- [`Sidebar.tsx`](src/components/layout/Sidebar.tsx) - Boƒçn√≠ panel
- [`Header.tsx`](src/components/layout/Header.tsx) - Horn√≠ li≈°ta

---

## üíª Implementace

### F√°ze implementace

| F√°ze | Komponenty | ƒåas | Priorita |
|------|-----------|-----|----------|
| **1. P≈ô√≠prava** | Instalace, konfigurace | 1-2h | üî¥ Kritick√° |
| **2. Struktura** | Slo≈æky, TypeScript types | 2-3h | üî¥ Kritick√° |
| **3. Services** | WebSocket, Auth, Storage | 4-6h | üî¥ Kritick√° |
| **4. State** | Zustand stores | 4-5h | üî¥ Kritick√° |
| **5. Hooks** | Custom hooks | 2-3h | üü° Vysok√° |
| **6. UI Common** | Loading, Error, Toast | 3-4h | üü° Vysok√° |
| **7. Auth UI** | Login komponenty | 4-5h | üî¥ Kritick√° |
| **8. Layout** | AppLayout, Sidebar | 3-4h | üü° Vysok√° |
| **9. Sessions** | Session management | 4-5h | üü° Vysok√° |
| **10. Chat** | Chat komponenty | 6-8h | üî¥ Kritick√° |
| **11. Integrace** | Propojen√≠ v≈°eho | 4-6h | üî¥ Kritick√° |
| **12. Polish** | UX, optimalizace | 6-8h | üü¢ St≈ôedn√≠ |

**Celkem**: ~56-76 hodin (7-10 pracovn√≠ch dn≈Ø)

### MVP (Minimum Viable Product)

Pro rychl√Ω start - implementovat v tomto po≈ôad√≠:

1. ‚úÖ Services (Storage, Auth, WebSocket)
2. ‚úÖ Stores (Auth, WebSocket, Chat)
3. ‚úÖ Auth komponenty
4. ‚úÖ Chat komponenty
5. ‚úÖ Z√°kladn√≠ integrace

**V√Ωsledek**: Funkƒçn√≠ chat s autentizac√≠ (~30-40 hodin)

---

## üé® Design Patterns

### 1. Service Layer Pattern
- Abstrakce API komunikace
- Centralizovan√° business logika
- Testovateln√© slu≈æby

### 2. Custom Hooks Pattern
- Reusable logika
- Separation of concerns
- Clean komponenty

### 3. Store Pattern (Zustand)
- Centralizovan√Ω state
- Immutable updates
- Predictable state changes

### 4. Compound Components
- Flexibiln√≠ komponenty
- Composition over inheritance
- Clear API

---

## üîí Security

### Implementovan√° opat≈ôen√≠

- ‚úÖ API key ulo≈æen√≠ v localStorage
- ‚úÖ Input sanitization
- ‚úÖ WebSocket authentication
- ‚úÖ Error boundaries
- ‚úÖ Type safety (TypeScript)

### Production checklist

- [ ] WSS (WebSocket Secure)
- [ ] HTTPS
- [ ] CORS konfigurace
- [ ] Rate limiting
- [ ] Error logging (Sentry)
- [ ] API key encryption (optional)

---

## üìä Performance

### Optimalizace

1. **React optimalizace**
   - React.memo pro Message komponenty
   - useMemo pro expensive v√Ωpoƒçty
   - useCallback pro event handlers

2. **Bundle optimalizace**
   - Code splitting
   - Lazy loading
   - Tree shaking

3. **Network optimalizace**
   - WebSocket message batching
   - Debounce typing indicators
   - Auto-reconnect s exponential backoff

### Oƒçek√°van√° velikost

- **Production bundle**: ~170-230 KB (gzipped)
- **React + React-DOM**: ~130 KB
- **Zustand**: ~3 KB
- **App Code**: ~20-40 KB
- **Tailwind CSS**: ~10-50 KB (z√°vis√≠ na pou≈æit√≠)

---

## üß™ Testing

### Testing strategie

```typescript
// Unit tests
- Services (auth, websocket, storage)
- Utility functions
- Store actions

// Integration tests
- Component + Hook + Store
- WebSocket message flow
- Auth flow

// E2E tests
- Login -> Chat -> Logout
- Session management
- Error scenarios
```

### Testing tools

- **Vitest** - Unit testing
- **React Testing Library** - Component testing
- **Playwright** - E2E testing

---

## üì¶ Deployment

### Environment Variables

```bash
# Development
VITE_API_BASE_URL=http://localhost:8000
VITE_WS_URL=ws://localhost:8000/ws/chat
VITE_MAX_RECONNECT_ATTEMPTS=5
VITE_RECONNECT_DELAY=1000

# Production
VITE_API_BASE_URL=https://api.yourdomain.com
VITE_WS_URL=wss://api.yourdomain.com/ws/chat
VITE_MAX_RECONNECT_ATTEMPTS=3
VITE_RECONNECT_DELAY=2000
```

### Build

```bash
# Type check
npm run type-check

# Build
npm run build

# Preview production build
npm run preview
```

---

## üîÑ Workflow

### Doporuƒçen√Ω workflow

1. **P≈ôeƒç√≠st architekturu** ‚Üí [`ARCHITEKTURA.md`](./ARCHITEKTURA.md)
2. **Nainstalovat z√°vislosti** ‚Üí [`ZAVISLOSTI.md`](./ZAVISLOSTI.md)
3. **N√°sledovat pl√°n** ‚Üí [`IMPLEMENTACNI_PLAN.md`](./IMPLEMENTACNI_PLAN.md)
4. **Pou≈æ√≠vat reference** ‚Üí [`REFERENCE.md`](./REFERENCE.md)
5. **Testovat pr≈Øbƒõ≈ænƒõ**
6. **Commit ƒçasto**
7. **Deploy**

### Git workflow

```bash
# Feature development
git checkout -b feature/auth-system
# ... implement
git commit -m "feat: implement auth system"
git push origin feature/auth-system

# Code review
# Merge to main
```

---

## üöß Budouc√≠ roz≈°√≠≈ôen√≠

### Pl√°novan√° vylep≈°en√≠

- üì± **PWA support** - Offline mode, installable app
- üåô **Dark mode** - Theme switching
- üìÅ **File upload** - Share files in chat
- üé§ **Voice input** - Speech-to-text
- üîç **Message search** - Full-text search
- ‚ö° **Real-time collaboration** - Multi-user sessions
- üé® **Theming system** - Customizable colors
- üìä **Analytics** - Usage tracking

---

## ü§ù Contributing

### Code Style

- TypeScript strict mode
- ESLint + Prettier
- Conventional commits
- Component-first approach

### Pull Request Process

1. Fork repository
2. Create feature branch
3. Make changes
4. Write tests
5. Update documentation
6. Submit PR

---

## üìù License

MIT License - see LICENSE file for details

---

## üÜò Support

### Troubleshooting

**WebSocket nep≈ôipojuje?**
- Zkontrolovat backend bƒõ≈æ√≠
- Ovƒõ≈ôit API kl√≠ƒç
- Zkontrolovat CORS

**Tailwind nefunguje?**
- Zkontrolovat tailwind.config.js
- Restartovat dev server
- Ovƒõ≈ôit import v index.css

**TypeScript errors?**
- Zkontrolovat tsconfig.json
- Restartovat TS server
- npm run type-check

### Kontakt

- **Issues**: GitHub Issues
- **Email**: support@example.com
- **Docs**: Full documentation in linked files

---

## ‚úÖ Kontroln√≠ seznam

### P≈ôed zaƒç√°tkem implementace

- [ ] P≈ôeƒçtena [`ARCHITEKTURA.md`](./ARCHITEKTURA.md)
- [ ] P≈ôeƒçtena [`ZAVISLOSTI.md`](./ZAVISLOSTI.md)
- [ ] P≈ôeƒçten [`IMPLEMENTACNI_PLAN.md`](./IMPLEMENTACNI_PLAN.md)
- [ ] Nainstalov√°ny z√°vislosti
- [ ] Nakonfigurov√°n Tailwind
- [ ] Vytvo≈ôeny .env soubory
- [ ] P≈ôipraven git repository

### Bƒõhem implementace

- [ ] Pou≈æ√≠vat TypeScript typy
- [ ] Testovat ka≈ædou komponentu
- [ ] Commit ƒçasto
- [ ] Dokumentovat zmƒõny
- [ ] Konzultovat [`REFERENCE.md`](./REFERENCE.md)

### P≈ôed deploymentem

- [ ] V≈°echny testy pro≈°ly
- [ ] Type check bez error≈Ø
- [ ] Build je √∫spƒõ≈°n√Ω
- [ ] Environment variables nastaveny
- [ ] Security checklist dokonƒçen

---

## üéâ Z√°vƒõr

Tato architektura poskytuje **solidn√≠ z√°klad** pro modern√≠ React aplikaci s:

- ‚ú® **ƒåist√Ω k√≥d** - Dob≈ôe organizovan√Ω, maintainable
- üöÄ **V√Ωkon** - Optimalizovan√Ω bundle, rychl√© rendering
- üîí **Bezpeƒçnost** - Type-safe, secured komunikace
- üì± **UX** - Responsivn√≠, intuitivn√≠ rozhran√≠
- üß™ **Testovatelnost** - Izolovan√© komponenty, testovateln√© slu≈æby
- üìö **Dokumentace** - Kompletn√≠, p≈ôehledn√°

**P≈ôipraveno k implementaci v Code m√≥du!** üöÄ

---

*Posledn√≠ aktualizace: 3. ≈ô√≠jna 2024*